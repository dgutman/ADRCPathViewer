<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset = UTF-8">
    <title>ADRC DSA Viewer</title>
    <script src="js/local_config.js"></script>
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="css/jquery.dataTables.css" />
 -->
    <!--- Filterable input selector that I am using, may be able to swap out for something diff -->
    <link href="bower_components/select2/dist/css/select2.min.css" rel="stylesheet" />
    <script src="bower_components/select2/dist/js/select2.min.js"></script>
    <script src="bower_components/knockout/dist/knockout.js"></script>
    <!--- BOOTSTRAP-- CAN REMOVE ONCE I FIX THE TOP PART -->
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css" />
    <!-- Jquery UI -->
    <script src="bower_components/jquery-ui/jquery-ui.js"></script>
    <link ref="stylesheet" type="text/css" href="bower_components/jquery-ui/themes/smoothness/theme.css" />
    <link ref="stylesheet" type="text/css" href="bower_components/jquery-ui/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="bower_components/jquery-ui/themes/base/jquery-ui.css" />
    <!-- Backbone and dependencies -->
    <!-- WEBIX COMPONENTS -->
    <script src="bower_components/webix/codebase/webix.js"></script>
    <link rel="stylesheet" type="text/css" href="bower_components/webix/codebase/webix.css">
    <!-- Openseadragon;  currently not all the plugins I need are available in bower, so using local copy -->
    <script src="bower_components/openseadragon/built-openseadragon/openseadragon/openseadragon.min.js"></script>
    <script src="js/openseadragon-imaginghelper.min.js"></script>
    <script src="js/openseadragon-viewerinputhook.min.js"></script>
    <script src="js/dsa_osd_mousehandlers.js"></script>
    <script type="text/javascript" src="js/osd_filters.js"></script>
    <!-- These are local scripts I have written -->
    <link rel="stylesheet" type="text/css" media="screen" href="css/dsa.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/mnv_style.css" />
    <script src="js/annotations.js"></script>
    <script src="js/aperio_markupLoader.js"></script>
    <!-- main scripts -->
    <script src="js/dsa_osd_knockout_bindings.js"></script>
    <!-- These have the bindings for knockout js integration-->
    <script src="js/dsa_main.js"></script>
    <script src="js/dsa_load.js"></script>
    <!-- This shold go last...-->
</head>

<body>
    <div webix-ui type="space">
        <div height="35" id="header">
            <div style="height:55px;">
                <div class="navbar navbar-inner">
                    <a class="brand" href="#">
                        <img src="images/CDSA_Slide_50.png" style="float:left" height="25" width="75" />&emsp;Digital Slide Viewer</a>
                    <ul class="nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="#">DSA Resources</a></li>
                        <li><a href="#">Help</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="main_layout">
        </div>
    </div>
    <div style="width:250px;">
        <div id="sel_image" class="">
            <div class="control-group" id="sel_groupName">
                <label class="control-label" for="slideGroup_sel">Select SlideSet</label>
                <select id="slideGroup_sel" class="input"></select>
                <div id="thumb_pager"></div>
                <span id="count_patient"></span>
                <span class="help-inline">Available Slides:</span>
                <div id="wbx_thumb_target"></div>
            </div>
        </div>
    </div>
    <div style="width:350px;" id="SlideInfoView">
        <!--img id="curImgSlideLabel" src="" -->
        <div data-bind="with: statusObj">
            <span>Mouse Pos: </span>
            <span>(</span>
            <span data-bind="text:(haveImage() &&  haveMouse()) ? mouseImgX().toFixed(0) : '-'"></span>
            <span>, </span>
            <span data-bind="text:(haveImage() &&  haveMouse()) ? mouseImgY().toFixed(0) : '-'"></span>
            <span>)</span>
        </div>
        


        <div data-bind="with: slideInfoObj">
            <span>Slide Size:</span>
            <span>(</span>
            <span data-bind="text:slideWidth()"></span>
            <span>, </span>
            <span data-bind="text:slideHeight()"></span>
            <span>)</span>
            <br>Tumor Type:
            <span data-bind="text:TumorType()"></span>
            <br>Slide Name:<span data-bind="text:slidename()"></span>
            <br>Has Annotations:<span data-bind="text:HasAnnotations()"></span>
            <br>Segmented Objects:<span data-bind="text:SegObjects()"></span>
            <span id="object_count"></span>
        </div>
    </div>
    <div style="background:#eee;height:1200px" id="osd_main_container">
        <div id="zoom_frame" > <!-- style="height:100%;position:fixed" REMOVED THAT BECAUSE IT WASN"T BEI--> 
            <div class="btn-group" style=";background:#373737">
                <input type="button" id="show_filter" value="Apply Filters" class="btn btn-small btn-inverse">
                <input type="button" id="report_bad_image_btn" value="Report Bad Image" class="btn btn-small btn-inverse">
                <input type="button" id="show_debug" value="Show Debug Info" class="btn btn-small btn-inverse">
                <input type="button" id="show_annotator" value="Draw Tools" class="btn btn-small btn-inverse" disabled>
                <input type="button" id="show_comment_dialog" value="Comment" class="btn btn-small btn-inverse">
                <input type="button" id="show_aperioxml" value="AperioXML" class="btn btn-small btn-inverse">
            </div>
            <div id="imageViewerContainer" class="relative-fill-container">
            
                <div id="image_zoomer" class="openseadragon-view" style="height:500px"></div>
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="overlaySvg" data-bind="withL svgOverlayVM" visibility="hidden" pointer-events="none" zoomAndPan="disable">
                    <defs></defs>
                    <!-- TODO - Can't get the binding to work with the transform function. 
                             Currently applying the transform manually in onImageViewChanged
                        -->
                    <g id="annoGrp" class="svgAnnoGrp" data-bind="attr: {transform: annoGrpTransformFunc}">
                        <g id="anno"></g>
                    </g>
                </svg>
            </div>
        </div>
    </div>
    <div style="height:35px;" id="footer"></div>
    <div style="clear:both"></div>
    <!-- This serves as the landing spot for the SVG color filter code -->
    <div id="filter_dialog" title="Apply Filters">Filter set gets injected here</div>
    <div id="annotation_dialog"></div>
    <div id="comment_dialog">
        <label>Comment:</label>
        <textarea rows="2" cols="50" name="slide_comment" id="slide_comment"></textarea>
    </div>
    <div id="debug_dialog"></div>
</body>

</html>
